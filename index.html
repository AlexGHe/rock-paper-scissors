<!DOCTYPE html>
<html>
<head>
  <title>Rock, Paper, Scissors</title>
</head>
<body>
  <p id="demo"></p>
  <script>

    let computerScore = 0;
    let playerScore = 0;
    const currentScore = () => {
      return ("Current score:\n" + "Computer - " + computerScore +
      "\nYou - " + playerScore);
    }
    const finalScore = () => {
      return ("Final score:\n" + "Computer - " + computerScore +
      "\nYou - " + playerScore);
    }

    const startGame = game();

    function game (){
      for (i=0;i<=4;i++){
        const playerSelection = prompt("rock, paper or scissors?").toLowerCase();
        const computerSelection = computerPlay();
        playRound(playerSelection, computerSelection);
      }
      if (computerScore > playerScore){
        return ("You lost. " + finalScore());
      }
      else if (computerScore < playerScore){
        return ("You won. " + finalScore());
      }
      else {
        return ("It's a tie. " + finalScore());
      }
    }

    function computerPlay(){
      const possibleOutcomes = ["rock", "paper", "scissors"];
      return possibleOutcomes[Math.floor(Math.random() * 3)];
    }

    function playRound(playerSelection, computerSelection) {
      if (playerSelection === computerSelection){
        return window.alert ("It's a tie! " + currentScore());
      }
      else if ((playerSelection === "rock") && (computerSelection === "paper") ||
      (playerSelection === "paper") && (computerSelection === "scissors") ||
      (playerSelection === "scissors") && (computerSelection === "rock")){
        computerScore++;
        return window.alert ("You lose! " + currentScore());
      }
      else if ((playerSelection === "rock") && (computerSelection === "scissors") ||
      (playerSelection === "paper") && (computerSelection === "rock") ||
      (playerSelection === "scissors") && (computerSelection === "paper")){
        playerScore++;
        return window.alert ("You win! " + currentScore());
      }
      else {
        return window.alert ("Not a valid shape!");
      }
    }
    document.getElementById("demo").innerHTML = startGame;
  </script>
</body>
</html>
